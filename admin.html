<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Response — Admin Panel</title>
    <link rel="stylesheet" href="admin.css">
    <!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>

<!-- Your Firebase files (add AFTER Firebase SDK) -->
<script src="js/firebase-config.js"></script>
<script src="js/firestore-service.js"></script>
<script src="js/auth.js"></script>
</head>

<body>
    <!-- HEADER -->
    <header class="header">
        <h1>Emergency Response</h1>
        <button class="admin-menu-trigger" id="adminMenuTrigger">
            <span>Admin</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6" />
            </svg>
        </button>
    </header>

    <!-- ADMIN SIDEBAR -->
    <aside class="admin-sidebar" id="adminSidebar">
        <h3>Admin Menu</h3>
        <ul>
            <li class="nav-item">
                <a href="analytics-dashboard.html">Analytics Dashboard</a>
            </li>
            <li class="nav-item">
                <a href="donation.html">Donate</a>
            </li>
            <li class="nav-item">
                <a href="pending-requests.html">Pending Requests</a>
            </li>
            <li class="nav-item">
                <a href="volunteer-management.html">volunteer-management</a>
            </li>
            <li class="nav-item">
                <a href="system-admin.html">System Administration</a>
            </li>
            <li class="nav-item">
                <a href="report-generation.html">Reporte Generate</a>
            </li>
            <li class="nav-item">
                <a href="system-settings.html">System Settings</a>
            </li>
        </ul>
    </aside>

    <!-- MAIN GRID -->
    <div class="grid">
        <!-- LEFT COLUMN - Now Hot Zones -->
        <aside class="col-left" aria-label="left column">
            <!-- Hot Zones -->
            <div class="panel">
                <div class="panel-title">Bangladesh Emergency Heat Map</div>
                <div class="heat-map-container">
                    <div id="bangladeshMap" style="height:300px; border-radius:6px; overflow:hidden;"></div>
                    <div class="heat-map-controls">
                        <button class="btn-control" onclick="toggleHeatMap()">Heat Layer</button>
                        <button class="btn-control" onclick="toggleMarkers()">Markers</button>
                    </div>
                    <div class="heat-legend">
                        <div class="legend-item">
                            <div class="legend-color heat-intensity-low"></div><span>Low (1-5)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color heat-intensity-medium"></div><span>Medium (6-15)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color heat-intensity-high"></div><span>High (16-30)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Chat -->
            <div class="panel">
                <div class="panel-title">Live Chat</div>
                <div class="chat">
                    <div class="chat-messages" id="chatMessages">
                        <div>User1: Need help at Sylhet!</div>
                        <div>User2: Dispatching team.</div>
                    </div>
                    <div class="fake-input" id="chatInput">Type a message...</div>
                </div>
            </div>
        </aside>

        <!-- MAIN COLUMN -->
        <main class="col-main" aria-label="main content">
            <!-- STATISTICS -->
            <section class="stats">
                <div class="stat">
                    <h2 id="stat-requests">103</h2>
                    <p>Active Requests</p>
                </div>
                <div class="stat">
                    <h2 id="stat-rescue">1.7k</h2>
                    <p>Rescues Completed</p>
                </div>
                <div class="stat">
                    <h2 id="stat-unsolved">225</h2>
                    <p>Unsolved Cases</p>
                </div>
                <div class="stat">
                    <h2 id="stat-death">32</h2>
                    <p>Fatalities</p>
                </div>
            </section>

            <!-- LIVE REQUEST FEED -->
            <section class="sync" aria-label="sync and requests">
                <div class="sync-header">
                    <h3>Live Request Feed</h3>
                    <button class="btn-filter" id="filterBtn">Filter Requests</button>
                </div>
                <div class="request-feed" id="requestFeed">
                    <div class="request-card">
                        <h4>Request from Sylhet</h4>
                        <p>Flood victims need rescue boats</p>
                        <div class="tags">
                            <span class="tag sylhet">Sylhet</span>
                            <span class="tag rescue">Rescue</span>
                        </div>
                        <div class="action-dot">⋮</div>
                    </div>
                </div>
            </section>
        </main>

        <!-- RIGHT COLUMN - Now Heat Map -->
        <aside class="col-right" aria-label="right column">
            <!-- VOLUNTEERS STATUS -->
            <div class="panel">
                <div class="panel-title">Volunteers Status</div>
                <p>Active: <strong id="vol-active">35</strong></p>
                <p>Available: <strong id="vol-free">7</strong></p>
                <p>Reserve: <strong id="vol-res">150</strong></p>
            </div>
            <!-- Hot zones -->
            <div class="panel">
                <div class="panel-title">Hot Zones</div>
                <div class="hotzones" id="hotZonesList">
                    <div>Zone 1 - High Priority</div>
                    <div>Zone 2 - Medium Priority</div>
                    <div>Zone 3 - Low Priority</div>
                </div>

                <!-- SCROLLABLE SUPPLIES -->
                <div class="right-scroll-area">
                    <div class="panel supplies">
                        <div class="panel-title">Emergency Supplies</div>
                        <ul>
                            <li><a href="medicine-inventory.html"
                                    style="color: inherit; text-decoration: none;">Medicine & First Aid</a></li>
                            <li><a href="food-inventory.html" style="color: inherit; text-decoration: none;">Food &
                                    Water</a></li>
                            <li><a href="vehicles-inventory.html" style="color: inherit; text-decoration: none;">Rescue
                                    Vehicles</a></li>
                            <li><a href="shelter-inventory.html"
                                    style="color: inherit; text-decoration: none;">Temporary Shelter</a></li>
                            <li><a href="equipment-inventory.html"
                                    style="color: inherit; text-decoration: none;">Emergency Equipment</a></li>

                        </ul>
                    </div>
                </div>
        </aside>
    </div>

    <!-- Load scripts -->
    <script src="admin.js"></script>
    <li><a href="medicine-inventory.html" style="color: inherit; text-decoration: none;"></a></li>
    <li><a href="food-inventory.html" style="color: inherit; text-decoration: none;"></a></li>
    <li><a href="vehicles-inventory.html" style="color: inherit; text-decoration: none;"></a></li>
    <li><a href="shelter-inventory.html" style="color: inherit; text-decoration: none;"></a></li>
    <li><a href="equipment-inventory.html" style="color: inherit; text-decoration: none;"></a></li>

    <script>
        // Admin sidebar toggle
        document.getElementById('adminMenuTrigger').addEventListener('click', function () {
            document.getElementById('adminSidebar').classList.toggle('active');
        });

        // Close sidebar when clicking outside
        document.addEventListener('click', function (event) {
            const sidebar = document.getElementById('adminSidebar');
            const trigger = document.getElementById('adminMenuTrigger');

            if (sidebar.classList.contains('active') &&
                !sidebar.contains(event.target) &&
                !trigger.contains(event.target)) {
                sidebar.classList.remove('active');
            }
        });
    </script>
    <!-- Add this to your admin sidebar -->
    <li class="nav-item">
    </li>

    <!-- Add this modal to admin.html -->
    <div id="userManagementModal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
            </div>
            <div class="modal-body">
                <div class="user-management-tabs">
                    <button class="tab-btn active" onclick="switchUserTab('volunteers')">Volunteers</button>
                    <button class="tab-btn" onclick="switchUserTab('admins')">Admins</button>
                    <button class="tab-btn" onclick="switchUserTab('create')">Create User</button>
                </div>

                <div id="volunteersTab" class="user-tab active">
                    <h4>Volunteer Accounts</h4>
                    <div id="volunteersList" class="users-list">
                        <!-- Volunteers will be listed here -->
                    </div>
                </div>

                <div id="adminsTab" class="user-tab">
                    <h4>Admin Accounts</h4>
                    <div id="adminsList" class="users-list">
                        <!-- Admins will be listed here -->
                    </div>
                </div>

                <div id="createTab" class="user-tab">
                    <h4>Create New User</h4>
                    <div class="form-group">
                        <label>User Type</label>
                        <select id="newUserType">
                            <option value="volunteer">Volunteer</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="newUserName" placeholder="Enter full name">
                    </div>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="newUserUsername" placeholder="Enter username">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="newUserPassword" placeholder="Enter password">
                    </div>
                    <div class="form-group" id="volunteerTeamField">
                        <label>Team</label>
                        <input type="text" id="newUserTeam" placeholder="Enter team name">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="newUserEmail" placeholder="Enter email">
                    </div>
                    <button class="btn btn-success" onclick="createNewUser()">Create User</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('userManagementModal')">Close</button>
            </div>
        </div>
    </div>
    
</body>

</html>